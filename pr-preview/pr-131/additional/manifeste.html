<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-04-11">
<meta name="description" content="Ce document, issu de délibérations collectives, propose, de manière non exhaustive, quelques éléments sur les objectifs du réseau, les moyens mis en oeuvre et la gouvernance de celui-ci.">

<title>Le manifeste du réseau des data scientists du service statistique public – SSPHub</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-5ea1227bf19878b87b7b96a706b3b221.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner h1,
      .quarto-title-block .quarto-title-banner h2,
      .quarto-title-block .quarto-title-banner h3,
      .quarto-title-block .quarto-title-banner h4,
      .quarto-title-block .quarto-title-banner h5,
      .quarto-title-block .quarto-title-banner h6
      {
        color: white;
      }

      .quarto-title-block .quarto-title-banner {
        color: white;
background: #6886bb;
      }
</style>


</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">SSPHub</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../event.html"> 
<span class="menu-text">Événements</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../infolettre/index.html"> 
<span class="menu-text">Newsletters</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../blog.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../course.html"> 
<span class="menu-text">Ressources utiles</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-propos" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">À propos</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-propos">    
        <li>
    <a class="dropdown-item" href="../about.html">
 <span class="dropdown-text">Présentation du réseau</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../additional/manifeste.html">
 <span class="dropdown-text">Manifeste du réseau</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="https://datalab.sspcloud.fr/"> 
<span class="menu-text">Le SSPCloud</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/InseeFrLab/ssphub"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="../index.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Le manifeste du réseau des data scientists du service statistique public</h1>
            <p class="subtitle lead">Un document produit collectivement pour s’accorder sur les objectifs et les moyens du réseau</p>
                  <div>
        <div class="description">
          <p>Ce document, issu de délibérations collectives, propose, de manière non exhaustive, quelques éléments sur les objectifs du réseau, les moyens mis en oeuvre et la gouvernance de celui-ci.</p>
        </div>
      </div>
                </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">April 11, 2022</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#contexte-institutionnel" id="toc-contexte-institutionnel" class="nav-link active" data-scroll-target="#contexte-institutionnel">Contexte institutionnel</a></li>
  <li><a href="#thématiques" id="toc-thématiques" class="nav-link" data-scroll-target="#thématiques">Thématiques</a></li>
  <li><a href="#objectifs" id="toc-objectifs" class="nav-link" data-scroll-target="#objectifs">Objectifs</a></li>
  <li><a href="#publics" id="toc-publics" class="nav-link" data-scroll-target="#publics">Publics</a></li>
  <li><a href="#moyens" id="toc-moyens" class="nav-link" data-scroll-target="#moyens">Moyens</a></li>
  <li><a href="#résumé" id="toc-résumé" class="nav-link" data-scroll-target="#résumé">Résumé</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Ce manifeste est une production collective. Pour proposer des modifications à celui-ci, qui seront discutées collégialement, vous pouvez suivre <a href="https://github.com/InseeFrLab/ssphub/edit/main/content/manifeste/index.md">ce lien vers <i class="fa-brands fa-github" aria-label="github"></i></a>.</p>
</div>
</div>
<section id="contexte-institutionnel" class="level1">
<h1>Contexte institutionnel</h1>
<p>La <em>data science</em> est un domaine interdisciplinaire combinant des techniques issues des mathématiques, de la statistique et de l’informatique pour produire de la connaissance utile à partir de données.</p>
<p>Les innovations récentes dans le domaine de la <em>data science</em> ont beaucoup à offrir à la statistique publique pour simplifier et accélérer certains processus de production, faciliter l’exploitation de sources de données non traditionnelles ou volumineuses, automatiser certaines tâches, communiquer auprès de publics plus larges avec des visualisations réactives ou encore, entre autres, réduire le hiatus entre statisticiens et informaticiens.</p>
<p>L’importance de la <em>data science</em> pour la sphère publique, a été soulignée dans différents rapports successifs. <a href="https://www.numerique.gouv.fr/publications/rapport-evaluation-besoins-etat-en-competences-et-expertises-en-matiere-de-donnee/">Le rapport public sur l’<em>«&nbsp;Évaluation des besoins de l’État en compétences et expertise en matière de donnée&nbsp;»</em></a> ainsi que le rapport de l’Inspection Générale de l’INSEE <em>«&nbsp;Les corps de l’INSEE et les carrières des data scientists&nbsp;»</em><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> recommandent la création de réseaux de <em>data scientists</em> pour répondre aux besoins dans ce domaine.</p>
<p>La pratique de la <em>data science</em> nécessite cependant l’expérience de nouvelles compétences, environnements et méthodes de travail. Cet article dans la <a href="https://hbr.org/2022/07/is-data-scientist-still-the-sexiest-job-of-the-21st-century"><em>Harvard Business Review</em></a>, qui revient 10 ans plus tard sur le titre provocateur <em><a href="https://hbr.org/2012/10/data-scientist-the-sexiest-job-of-the-21st-century">“Data Scientist: Sexiest Job of the 21st Century”</a></em>, illustre les changements rapides au cours de la dernière décennie du rôle du <em>data scientist</em> dans l’écosystème de la donnée. Cette multiplication des compétences rend utile un réseau de praticiens partageant régulièrement ensemble leur expérience, les ressources jugées utiles et échangeant sur les innovations récentes pouvant amener à des évolutions de la production de statistique publique.</p>
</section>
<section id="thématiques" class="level1">
<h1>Thématiques</h1>
<p>Le réseau regroupe les agents volontaires du Service Statistique Public (SSP)<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>. Ce réseau a vocation à diffuser dans l’ensemble des administrations de la statistique publique les thématiques pouvant amener à des évolutions de la production statistique.</p>
<!----------
La liste des sujets abordés dans le cadre du réseau sont, entre autres : 

- Visualisations esthétiques, automatisées et potentiellement interactives[^2] ;
- Acquisition, appréhension de nouvelles sources de données et exploitation de données non structurées : images ou données textuelles issues  d'*open data*, de *webscraping* ou d'API ;
- Utilisation d’algorithmes de _machine_ et _deep learning_ avec des jeux de données de nature variée dans une optique de production de statistiques récurrentes ou d’études visant à modéliser des phénomènes avec un nombre d’hypothèses restreintes. Ces algorithmes, fréquemment appliqués dans le cadre du traitement de langage naturel (NLP) ou d'exploitations d'images (_computer vision_), peuvent aussi servir à des fins de modélisation plus classique (imputation de valeurs manquantes, prédiction d'une variable...) ;
- Bonnes pratiques issues du monde informatique et mise en production : standards de qualité de code, gestion de versions et travail collaboratif (`Git`), mise à disposition automatique d'environnements standardisés[^3] ;
- Gestion et manipulation de données massives : format des bases, calcul distribué ou parallélisé...

[^2]: Ces _dataviz_ peuvent être des applications réactives (`Shiny`, `Dash`, `StreamLit`) ou des visualisations géographiques (`Leaflet`, `Folium`, `Plotly`)
[^3]: La mise en place d'environnements standardisés intègre des problématiques comme la création d’environnements portables (`Docker`) mais aussi la mise en place d'outils de déploiement automatisés (`CI/CD`, `Kubernetes`)
-------->
<p>Dans le cadre d’une démarche ouverte, les membres du réseau ont mis en oeuvre un site web, nommé <em>«&nbsp;SSP Hub&nbsp;»</em>, permettant de diffuser les projets et les connaissances acquises, qu’elles soient produites par des membres du réseau ou non. Ce site relaye à la fois les actions du réseau (posts de blog, projets menés, événéments organisés) mais aussi des ressources utiles pour les <em>data scientists</em> de l’administration qui désirent suivre des événements liés à la <em>data-science</em> ou explorer des ressources éducatives sur le sujet.</p>
</section>
<section id="objectifs" class="level1">
<h1>Objectifs</h1>
<p>À court terme, les objectifs du réseau sont :</p>
<ol type="1">
<li><strong>Faciliter l’échange entre pairs</strong>, notamment les retours d’expérience sur des problématiques génériques de la <em>data science</em> appliquées aux tâches du SSP<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>. Ces échanges doivent aider à résoudre les problèmes concrets que les agents rencontrent dans leur pratique de la <em>data science</em> et favoriser la mutualisation des connaissances ;</li>
<li><strong>Promouvoir et démystifier la <em>data science</em></strong> en acculturant un public non aguerri à cette thématique en montrant par l’exemple ses apports concrets mais aussi en mettant à disposition les ressources et formations disponibles pour son appréhension.</li>
</ol>
<p>A plus long terme, selon la réussite initiale du réseau, les demandes exprimées par les participants et les moyens dégagés, le <em>SSP Hub</em> pourrait :</p>
<ol type="1">
<li><strong>Offrir une vitrine des initiatives de <em>data science</em></strong> au sein du SSP<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> et favoriser la visibilité et le dialogue avec d’autres acteurs de la <em>data science</em> (autres institutions françaises, institutions internationales, enseignement supérieur et recherche académique…)</li>
<li><strong>Accompagner de manière ponctuelle des équipes</strong> dans l’amélioration de processus de production existants grâce aux outils ou méthodes de la <em>data science</em>. Ces accompagnements offrent un complément utile aux formations en proposant l’acquisition de compétences sur un projet sur lequel les agents travaillent à une fréquence élevée.</li>
</ol>
</section>
<section id="publics" class="level1">
<h1>Publics</h1>
<p>Ce réseau s’adresse à tous les agents du Service Statistique Public intéressés par les thématiques définies précédemment, indépendamment du niveau d’expertise. En pratique coexisteraient donc des agents experts et débutants en <em>data science</em> partageant leurs connaissances et pouvant s’entraider, des statisticiens «&nbsp;classiques&nbsp;» curieux de ces nouvelles techniques et désireux d’en apprendre plus voire se former, et enfin des encadrants souhaitant s’acculturer aux sujets en vue de favoriser l’utilisation de ces outils dans leurs services.</p>
<p>Si certains sujets peuvent concerner un public restreint dans le service statistique publique (analyse d’image par exemple) d’autres ont vocation à intéresser et aider un public bien plus large, ne se définissant pas nécessairement comme <em>data scientist</em> (<code>Git</code>, bonnes pratiques de développement, <em>data vizualisation</em> entre autres).</p>
</section>
<section id="moyens" class="level1">
<h1>Moyens</h1>
<p>Plusieurs éléments sont mis en place pour atteindre les objectifs du réseau :</p>
<ul>
<li>Le présent <strong>site web</strong> indexe les travaux, formations et bonnes pratiques à mutualiser pour diffusion de l’information. Son contenu est en cours construction sur la base des suggestions des personnes faisant parti du réseau ;</li>
<li>Un ensemble d’<strong>évènements ouverts</strong>. Afin de répondre aux différents besoins, ceux-ci visent des publics, durées et finalités variés. Le premier type d’évènement, testé en 2022, est l’<em>Open Hour</em> dont le rôle est de choisir pour chaque occurence un thème en amont et d’en discuter informellement entre agents travaillant sur cette thématique et ceux désireux d’en apprendre plus. D’autres évènements seront mis en place progressivement selon les formats et contenus identifiés comme pertinents ;</li>
<li>Des canaux de communication sur l’actualité du réseau&nbsp;(infolettre mensuelle) et d’échanges en continu entre agents du réseau (à travers un canal <code>Tchap</code><a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>)</li>
</ul>
</section>
<section id="résumé" class="level1">
<h1>Résumé</h1>
<p>Le réseau des <em>data scientists</em> doit permettre de faire «&nbsp;plus et mieux&nbsp;» de <em>data science</em> en étant composé d’un public aux compétences et attentes diverses. Le réseau se veut inclusif, ouvert, utile, informel et convivial.</p>
<p>Pour faciliter son adoption, le réseau cherche à apporter des solutions et informations concrètes sans impliquer une charge horaire trop conséquente. Les discussions y sont conviviales et la multiplicité des sujets abordés permet à tous de trouver des ressources utiles.</p>
<p>Les contours du réseau tels que décrits dans le présent manifeste, ainsi que la ligne éditoriale des sujets et évènements sont une première proposition dont la pertinence sera jugée à l’aune de la satisfaction des participants.</p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Rapport de l’Inspection Générale de l’Insee <code>N° 2020_48/DG75-B001</code> (non public)<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Le Service Statistique Public (SSP) regroupe les institutions en charge de la production de statistiques officielles. Il est principalement constitué de l’Insee et des services statistiques ministériels (SSM). Pour en savoir plus, le <a href="https://www.insee.fr/fr/information/1302192">site de l’Insee</a> propose des éléments supplémentaires.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Le Service Statistique Public (SSP) regroupe les institutions en charge de la production de statistiques officielles. Il est principalement constitué de l’Insee et des services statistiques ministériels (SSM). Pour en savoir plus, le <a href="https://www.insee.fr/fr/information/1302192">site de l’Insee</a> propose des éléments supplémentaires.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Le Service Statistique Public (SSP) regroupe les institutions en charge de la production de statistiques officielles. Il est principalement constitué de l’Insee et des services statistiques ministériels (SSM). Pour en savoir plus, le <a href="https://www.insee.fr/fr/information/1302192">site de l’Insee</a> propose des éléments supplémentaires.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Il est possible de rejoindre ce canal <code>Tchap</code> sur simple demande à <a href="mailto:ssphub-contact@insee.fr" class="email">ssphub-contact@insee.fr</a><a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/ssphub\.netlify\.app\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>