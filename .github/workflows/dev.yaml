on:
  pull_request:
    branches:
      - main
      - master
      - dev

jobs:
  pages:
    name: Render-Blog
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0
          ref: ${{ github.event.pull_request.head.ref }}
          repository: ${{github.event.pull_request.head.repo.full_name}}
      - name: Configure safe.directory  # Workaround for actions/checkout#760
        run: git config --global --add safe.directory /__w/ssphub/ssphub
      - uses: actions/setup-python@v4
        with:
          python-version: '3.10' # Version range or exact version of a Python version to use, using SemVer's version range syntax
      - run: pip install jupyter nbformat
      - uses: quarto-dev/quarto-actions/setup@v2
        with:
          version: 1.3.450
      - name: Render Quarto Project
        uses: quarto-dev/quarto-actions/render@v2
      - name: Install npm
        if: ${{ github.event.pull_request.head.repo.full_name == github.repository }}
        uses: actions/setup-node@v2          
        with:
          node-version: '14'
